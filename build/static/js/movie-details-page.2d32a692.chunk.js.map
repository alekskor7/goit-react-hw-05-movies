{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","views/MovieDetailsPage.module.css","views/MovieDetailsPage.jsx"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","module","exports","Cast","lazy","Reviews","MovieDetailsPage","useState","movie","setMovie","showLoader","setShowLoader","movieId","useParams","url","useRouteMatch","location","useLocation","useEffect","a","getMovieDetails","movieInfo","toast","error","message","theme","fetchMovieDetails","state","from","onGoBack","type","color","height","width","className","styles","goBack","to","Wrapper","src","poster_path","alt","title","Image","Description","release_date","split","overview","popularity","genres","map","name","join","fallback","path","id"],"mappings":"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","file":"static/js/movie-details-page.2d32a692.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"MovieDetailsPage_Wrapper__bfxut\",\"Image\":\"MovieDetailsPage_Image__1n4O5\",\"Description\":\"MovieDetailsPage_Description__2Ia7U\",\"goBack\":\"MovieDetailsPage_goBack__2VvE0\"};","import { useState, useEffect, lazy, Suspense } from 'react';\r\nimport {\r\n  useParams,\r\n  useRouteMatch,\r\n  Link,\r\n  Route,\r\n  // useHistory,\r\n  useLocation,\r\n} from 'react-router-dom';\r\nimport Loader from 'react-loader-spinner';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { getMovieDetails } from '../Api/Api';\r\n\r\nimport styles from './MovieDetailsPage.module.css';\r\n\r\nconst Cast = lazy(() =>\r\n  import('../components/Cast' /*webpackChunkName: \"cast\" */),\r\n);\r\nconst Reviews = lazy(() =>\r\n  import('../components/Reviews' /*webpackChunkName: \"reviews\" */),\r\n);\r\n\r\nexport default function MovieDetailsPage() {\r\n  const [movie, setMovie] = useState(null);\r\n  const [showLoader, setShowLoader] = useState(false);\r\n  const { movieId } = useParams();\r\n  const { url } = useRouteMatch();\r\n  // const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    async function fetchMovieDetails() {\r\n      try {\r\n        setShowLoader(true);\r\n        const movieInfo = await getMovieDetails(movieId);\r\n\r\n        setMovie({ ...movieInfo });\r\n      } catch (error) {\r\n        toast.error(error.message, { theme: 'colored' });\r\n      } finally {\r\n        setShowLoader(false);\r\n      }\r\n    }\r\n\r\n    fetchMovieDetails();\r\n  }, [movieId]);\r\n\r\n// 1. не сохраняется запрос поиска\r\n  // const onGoBack = () => { history.push(location?.state?.from ?? '/movies');};\r\n// 2. сохраняется запрос \r\n  const [onGoBack] = useState(location?.state?.from ?? '/',);\r\n\r\n  return (\r\n    <>\r\n      {showLoader && (\r\n        <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n      )}\r\n\r\n      {movie && (\r\n        <>\r\n          {/* 1 */}\r\n          {/* <button type=\"button\" style={{ marginBottom: '20px' }} onClick={onGoBack}>Go back</button> */}\r\n\r\n          {/* 2 */}\r\n          <Link type=\"button\" className={styles.goBack} to={onGoBack}>Go back</Link>\r\n\r\n          <div>\r\n            <div className={styles.Wrapper}>\r\n              <div>\r\n                <img\r\n                  src={`https://image.tmdb.org/t/p/w300${movie.poster_path}`}\r\n                  alt={movie.title}\r\n                  className={styles.Image}\r\n                />\r\n              </div>\r\n              <div className={styles.Description}>\r\n                <h2>\r\n                  Title: {movie.title}{' '}\r\n                  <span>({movie.release_date.split('-')[0]})</span>\r\n                </h2>\r\n                <h2>Overview:</h2>\r\n                <p>{movie.overview}</p>\r\n                <h3>Popularity:</h3>\r\n                <span>{movie.popularity}</span>\r\n                <h3>Genres:</h3>\r\n                <span>{movie.genres?.map(({ name }) => name).join(', ')}</span>\r\n              </div>\r\n            </div>\r\n            <h2>Additional information:</h2>\r\n            <ul>\r\n              <li>\r\n                <Link to={`${url}/cast`}>\r\n                  <h3>Cast</h3>\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link to={`${url}/reviews`}>\r\n                  <h3>Reviews</h3>\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n            <Suspense\r\n              fallback={\r\n                <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n              }\r\n            >\r\n              <Route path={`${url}/cast`}>\r\n                <Cast movieId={movie.id} />\r\n              </Route>\r\n              <Route path={`${url}/reviews`}>\r\n                <Reviews movieId={movie.id} />\r\n              </Route>\r\n            </Suspense>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}